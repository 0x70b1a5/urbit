diff -ur cctools-895-orig/include/stuff/bytesex.h cctools-895/include/stuff/bytesex.h
--- cctools-895-orig/include/stuff/bytesex.h	2016-12-09 10:02:57.000000000 -0800
+++ cctools-895/include/stuff/bytesex.h	2017-09-24 20:05:50.793381298 -0700
@@ -70,6 +70,11 @@
 		      (((a) >> 8) & 0x0000ff00) | \
 	 ((unsigned int)(a) >> 24) )
 
+#define SWAP_U32(a)  ( ((a) << 24) | \
+		      (((a) << 8) & 0x00ff0000) | \
+		      (((a) >> 8) & 0x0000ff00) | \
+	((unsigned long)(a) >> 24) )
+
 #ifndef __LP64__
 #define SWAP_LONG(a) ( ((a) << 24) | \
 		      (((a) << 8) & 0x00ff0000) | \
diff -ur cctools-895-orig/ld/pass1.c cctools-895/ld/pass1.c
--- cctools-895-orig/ld/pass1.c	2016-12-09 10:02:58.000000000 -0800
+++ cctools-895/ld/pass1.c	2017-09-24 20:09:59.212962853 -0700
@@ -491,7 +491,7 @@
 	if(fat_header->magic == FAT_MAGIC)
 #endif /* __BIG_ENDIAN__ */
 #ifdef __LITTLE_ENDIAN__
-	if(fat_header->magic == SWAP_LONG(FAT_MAGIC))
+	if(fat_header->magic == SWAP_U32(FAT_MAGIC))
 #endif /* __LITTLE_ENDIAN__ */
 	{
 #ifdef RLD
@@ -1108,7 +1108,7 @@
 		   fat_header->magic == FAT_MAGIC)
 #endif
 #ifdef __LITTLE_ENDIAN__
-		   fat_header->magic == SWAP_LONG(FAT_MAGIC))
+		   fat_header->magic == SWAP_U32(FAT_MAGIC))
 #endif
 		{
 #ifdef __LITTLE_ENDIAN__
@@ -3721,7 +3721,7 @@
 	if(fat_header->magic == FAT_MAGIC)
 #endif /* __BIG_ENDIAN__ */
 #ifdef __LITTLE_ENDIAN__
-	if(fat_header->magic == SWAP_LONG(FAT_MAGIC))
+	if(fat_header->magic == SWAP_U32(FAT_MAGIC))
 #endif /* __LITTLE_ENDIAN__ */
 	{
 	    pass1_fat(file_name, file_addr, file_size, FALSE, TRUE, FALSE,
diff -ur cctools-895-orig/ld/pass1.h cctools-895/ld/pass1.h
--- cctools-895-orig/ld/pass1.h	2016-12-09 10:02:58.000000000 -0800
+++ cctools-895/ld/pass1.h	2017-09-24 19:56:29.257049807 -0700
@@ -33,44 +33,44 @@
 
 #ifndef RLD
 /* TRUE if -search_paths_first was specified */
-__private_extern__ enum bool search_paths_first;
+extern enum bool search_paths_first;
 
 /* the user specified directories to search for -lx filenames, and the number
    of them */
-__private_extern__ char **search_dirs;
-__private_extern__ unsigned long nsearch_dirs;
+extern char **search_dirs;
+extern unsigned long nsearch_dirs;
 
 /*
  * The user specified directories to search via the environment variable
  * LD_LIBRARY_PATH.
  */
-__private_extern__ char **ld_library_paths;
-__private_extern__ unsigned long nld_library_paths;
+extern char **ld_library_paths;
+extern unsigned long nld_library_paths;
 
 /* the standard directories to search for -lx filenames */
-__private_extern__ char *standard_dirs[];
+extern char *standard_dirs[];
 
 /*
  * The user specified directories to search for "-framework Foo" names, and the
  * number of them.  These are specified with -F options.
  */
-__private_extern__ char **framework_dirs;
-__private_extern__ unsigned long nframework_dirs;
+extern char **framework_dirs;
+extern unsigned long nframework_dirs;
 
 /* the standard framework directories to search for "-framework Foo" names */
-__private_extern__ char *standard_framework_dirs[];
+extern char *standard_framework_dirs[];
 
 /* the pointer to the head of the base object file's segments */
-__private_extern__ struct merged_segment *base_obj_segments;
+extern struct merged_segment *base_obj_segments;
 
 /*
  * These are pointers to strings and symbols used to search of the table of
  * contents of a library.  These have to be can not be local so that routines
  * can set them and that ranlib_bsearch() and dylib_bsearch() can use them.
  */
-__private_extern__ char *bsearch_strings;
+extern char *bsearch_strings;
 #ifndef RLD
-__private_extern__ struct nlist *bsearch_symbols;
+extern struct nlist *bsearch_symbols;
 #endif /* !defined(RLD) */
 
 /*
@@ -127,9 +127,9 @@
  * can contain archive libraries when archive libraries appear after dynamic
  * libraries on the link line.
  */
-__private_extern__ struct dynamic_library *dynamic_libs;
+extern struct dynamic_library *dynamic_libs;
 
-__private_extern__ unsigned int indirect_library_ratio;
+extern unsigned int indirect_library_ratio;
 
 #endif /* !defined(RLD) */
 
